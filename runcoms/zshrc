# vim: set ft=zsh
# shellcheck shell=bash # Closest thing to zsh whilst shellcheck doesn't support zsh
#
# Executes commands at the start of an interactive session.
#
# Authors:
#   Sorin Ionescu <sorin.ionescu@gmail.com>
#
# Profile loading the shell using `DEBUG_ZSH=1 zsh -i`
[ -n "$DEBUG_ZSH" ] && zmodload zsh/zprof

# Source Prezto.
if [ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]; then
  # shellcheck disable=SC1090
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi

# Customize to your needs...

#### ---:[ Aliases ]:--- ###
alias rm='nocorrect rm'
alias l='ls -lg'
alias ll='ls -lga'
alias ..='cd ..'
alias path='echo -e ${PATH//:/\\n}'
alias less="less -RMFXK"
alias more="less"
alias unzip="unzip -qq"
# shellcheck disable=SC2139
alias myprocs="ps aux | grep $USER"
alias nocmt="grep -v '^$\|^\s*\#'"
alias vag=vagrant
alias j="JEKYLL_ENV=local jekyll serve --watch --draft"
alias wtr='curl wttr.in/'
alias wtrr='curl wttr.in/Reading'
alias atom='atom-beta'
command -v bat > /dev/null && alias cat=bat && export BAT_THEME="Monokai Extended"
command -v exa > /dev/null && alias ls=exa
command -v ag > /dev/null && alias ag='ag --color --pager less' && alias ack=ag
command -v rg > /dev/null && rg() { /usr/local/bin/rg -p "$@" | less; }
command -v prettyping > /dev/null && alias ping="prettyping --nolegend"
command -v htop > /dev/null && alias top=htop

# Vagrant Aliases
alias v=vagrant
alias vst="vagrant status"
alias vstat=vst
alias vup="vagrant up"
alias vhalt="vagrant halt"
alias valt=vhalt
alias vupp="vagrant up --provision"
alias vssh="vagrant ssh"
# Use `vagrant ssh-config >> ~/.ssh/config` to add current config to ssh config
alias vsftp="sftp default"

# Lazy Git aliases
alias gcom="git checkout master"
alias gup="git up"  # Uses the `up` alias in my .gitconfigcd
alias gst="git status"
alias g='git'
alias gb='git branch'
alias gbc='git checkout -b'
alias gc='git commit --verbose'
alias gco='git checkout'
alias gls='git log --topo-order --stat --pretty=format:"${_git_log_medium_format}"'
alias gld='git log --topo-order --stat --patch --full-diff --pretty=format:"${_git_log_medium_format}"'
alias gp='git push'
command -v hub > /dev/null && alias git=hub

# Pull in AWS autocomplete manually as it doesn't work automatically - https://github.com/sorin-ionescu/prezto/issues/1142
command -v aws > /dev/null && {
  [ -f /usr/local/opt/awscli/share/zsh/site-functions/aws_zsh_completer.sh ] && source /usr/local/opt/awscli/share/zsh/site-functions/aws_zsh_completer.sh
}

# Pull in the Azure autocomplete. Cache it as it can be slow at times
command -v azure > /dev/null && {
  cache="${ZDOTDIR:-$HOME}/.zprezto/modules/completion/azure-cache.zsh"
  [ ! -f "$cache" ] && azure --completion > "$cache"
  # shellcheck disable=SC1090
  source "$cache"
}

# Load nodenv automatically
#command -v nodenv > /dev/null && eval "$(nodenv init -)"
#nodenv() {
#  eval "$(command nodenv init -)"
#  nodenv "$@"
#}

# Like the ~ => $HOME mapping? Well this is how I use this for other common dirs so I can easily `cd ~/gh/foo` etc.
hash -d gh="$HOME/github"
hash -d ent2="$HOME/github/enterprise2"
hash -d ent-chatops="$HOME/github/enterprise-chatops"
hash -d dev="$HOME/Development"

# added by travis gem
# shellcheck disable=SC1090
[ -f "$HOME/.travis/travis.sh" ] && source "$HOME/.travis/travis.sh"
# shellcheck disable=SC1090
[ -f "$HOME/.fzf.zsh" ] && source "$HOME/.fzf.zsh"

# This must always be last.
[ -n "$DEBUG_ZSH" ] && zprof
