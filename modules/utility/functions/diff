#
# Highlights diff output.
#
# Authors:
#   Sorin Ionescu <sorin.ionescu@gmail.com>
#

if zstyle -t ':omz:module:utility:diff' color; then
  function diff {
    if (( $+commands[colordiff] )); then
      "$commands[diff]" --unified "$@" | colordiff --difftype diffu
    elif (( $+commands[git] )); then
      git --no-pager diff --color=auto --no-ext-diff --no-index "$@"
    else
      "$commands[diff]" --unified "$@"
    fi
  }
else
  unfunction diff
fi

diff --unified "$@"

